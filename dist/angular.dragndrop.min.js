!function(e){"use strict";var t=e.module("angular.dragndrop",[]);t.constant("configurations",{draggableClass:"",droppableClass:""}),t.provider("dragndrop",["configurations",function(e){this.setDraggableClass=function(t){return e.draggableClass=t,this},this.setDroppableClass=function(t){return e.droppableClass=t,this},this.$get=function(){var e={},t=function(t){return e[t]},n=function(t,n){e[t]=n};return{getElement:t,setElement:n}}}]),t.directive("draggable",["$parse","dragndrop","configurations",function(e,t,n){return function(r,a,o){var l=e(o.draggableModel||void 0,null,!0)(r),s=o.restricted,d=o.effectAllowed||"copy",g=e(o.dragStartCallback||void 0,null,!0),i=e(o.dragEndCallback||void 0,null,!0);a.attr("draggable",!0),a.on("dragstart",function(e){return t.setElement("eventTarget",l),t.setElement("eventRestricted",s),e.dataTransfer.effectAllowed=d,e.dataTransfer.setData("Text",""),a.addClass(n.draggableClass),"function"==typeof g&&g(r,{$event:{target:t.getElement("eventTarget"),targetType:t.getElement("eventRestricted")}}),!1}),a.on("dragend",function(e){return a.removeClass(n.draggableClass),"function"==typeof i&&i(r,{$event:{target:t.getElement("eventTarget"),targetType:t.getElement("eventRestricted")}}),!1})}}]),t.directive("droppable",["$parse","dragndrop","configurations",function(e,t,n){return function(r,a,o){var l=o.restricted,s=o.dropEffect||"copy",d=!1,g=!1,i=e(o.dropCallback||void 0,null,!0);a.on("dragover",function(e){return l==t.getElement("eventRestricted")&&(e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect=s),!1}),a.on("dragenter",function(e){return l==t.getElement("eventRestricted")&&(d?g=!0:(d=!0,a.addClass(n.droppableClass))),!1}),a.on("dragleave",function(e){return l==t.getElement("eventRestricted")&&(g?g=!1:d&&(d=!1),d||g||a.removeClass(n.droppableClass)),!1}),a.on("drop",function(e){return l==t.getElement("eventRestricted")&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),d=!1,g=!1,a.removeClass(n.droppableClass),"function"==typeof i&&i(r,{$event:{target:t.getElement("eventTarget"),restricted:t.getElement("eventRestricted")}})),!1})}}])}(angular);