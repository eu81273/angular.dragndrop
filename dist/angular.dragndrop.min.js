!function(e){"use strict";var t=e.module("angular.dragndrop",[]);t.constant("configurations",{draggableClass:"",droppableClass:""}),t.provider("dragndrop",["configurations",function(e){this.setDraggableClass=function(t){return e.draggableClass=t,this},this.setDroppableClass=function(t){return e.droppableClass=t,this},this.$get=function(){var e={},t=function(t){return e[t]},r=function(t,r){e[t]=r};return{getElement:t,setElement:r}}}]),t.directive("draggable",["$parse","dragndrop","configurations",function(e,t,r){return function(n,a,d){var s=d.restricted,l=d.effectAllowed||"copy",o=e(d.draggableModel||void 0,null,!0)(n),i=e(d.dragStartCallback||void 0,null,!0),g=e(d.dragEndCallback||void 0,null,!0);a.attr("draggable",!0),a[0].addEventListener("dragstart",function(e){return t.setElement("eventTarget",o),t.setElement("eventRestricted",s),e.dataTransfer?(e.dataTransfer.effectAllowed=l,e.dataTransfer.setData("Text","")):(e.originalEvent.dataTransfer.effectAllowed=l,e.originalEvent.dataTransfer.setData("Text","")),a.addClass(r.draggableClass),"function"==typeof i&&i(n,{$event:{target:t.getElement("eventTarget"),targetType:t.getElement("eventRestricted")}}),!1}),a[0].addEventListener("dragend",function(e){return a.removeClass(r.draggableClass),"function"==typeof g&&g(n,{$event:{target:t.getElement("eventTarget"),targetType:t.getElement("eventRestricted")}}),!1})}}]),t.directive("droppable",["$parse","dragndrop","configurations",function(e,t,r){return function(n,a,d){var s=d.restricted,l=d.dropEffect||"copy",o=!1,i=!1,g=e(d.dropCallback||void 0,null,!0);a[0].addEventListener("dragover",function(e){return s==t.getElement("eventRestricted")&&(e.preventDefault&&e.preventDefault(),e.dataTransfer?e.dataTransfer.dropEffect=l:e.originalEvent.dataTransfer.dropEffect=l),!1}),a[0].addEventListener("dragenter",function(e){return s==t.getElement("eventRestricted")&&(o?i=!0:(o=!0,a.addClass(r.droppableClass))),!1}),a[0].addEventListener("dragleave",function(e){return s==t.getElement("eventRestricted")&&(i?i=!1:o&&(o=!1),o||i||a.removeClass(r.droppableClass)),!1}),a[0].addEventListener("drop",function(e){return s==t.getElement("eventRestricted")&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),o=!1,i=!1,a.removeClass(r.droppableClass),"function"==typeof g&&g(n,{$event:{target:t.getElement("eventTarget"),restricted:t.getElement("eventRestricted")}})),!1})}}])}(angular);